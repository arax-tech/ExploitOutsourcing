<?php

namespace App\Http\Controllers\Home;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Mail;
use App\Mail\SendUsQuote;
use App\Service;
use App\Shop;
use App\Review;
use App\Faq;
class HomeController extends Controller
{
    public function home()
    {
    	$services = Service::get();
    	return view('home', compact('services'));
    }

    public function services()
    {
    	$services = Service::paginate(12);
    	return view('services', compact('services'));
    }

    public function service($id)
    {
        // dd($id);
        $services = Service::get();
        $service = Service::find($id);
        return view('single-service', compact('service', 'services'));
    }


    public function faq()
    {
        // dd($id);
        $faqs = Faq::get();
        return view('faq', compact('faqs'));
    }

    public function contact()
    {
        return view('contact');
    }

    public function send_us_quote(Request $request)
    {
        if ($request->isMethod('post'))
        {
            // dd($request->all());


            $details = [
                    'name' => $request->name,
                    'email' => $request->email,
                    'phone' => $request->phone,
                    'descriptions' => $request->descriptions
                ];
               
            Mail::to('fridayedwin78@gmail.com')->send(new \App\Mail\SendUsQuote($details));
           
             return redirect()->back()->with('flash_message_success','Thank you for contacting us we will revert back shortly');
        }
        return view('send-us-quote');
    }

    public function shop ()
    {
        $shops = Shop::get();
        return view('shop', compact('shops'));
    }

    public function review(Request $request)
    {
        $review = new Review;
        $review->name = $request->name;
        $review->email = $request->email;
        $review->comment = $request->reviews;
        $review->ratings = $request->ratings;
        $review->save();
        return redirect()->back()->with('flash_message_success','Thank you for review us');
    }
}
